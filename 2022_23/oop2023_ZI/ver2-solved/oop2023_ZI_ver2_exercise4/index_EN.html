 <!DOCTYPE html>
 <html>
 <head>
   <meta charset="UTF-8">
  <link href="res/prism.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 16px;
    }
    code {
      font-size: 16px;
      font-family: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
    }
  </style>
</head>
<body>
<p>The task requires completing the <code>Lambdas</code> class by implementing three static attributes as shown in the class diagram. The static attribute <code>loadFromStream</code> is of type <code>BiConsumer</code>, and its <code>accept</code> method is used for loading data from a TSV (tab separated values) file into a map. The remaining two static attributes are of type <code>BiFunction</code>, and their <code>apply</code> methods utilize the map with loaded data for calculating statistics.</p>
<p><strong>Notes:</strong> Each of these three static attributes should be implemented as <strong>lambda expressions</strong> using the Java Stream API (i.e., collection streams). There is no need to catch or handle exceptions during the implementation. The <code>Lambdas</code> class should be located in the package <code>hr.fer.oop.stats</code>, and both the class and its static attributes should have their visibility set to <em>public</em>.</p>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="117px" preserveAspectRatio="none" style="width:859px;height:117px;background:#FFFFFF;" version="1.1" viewBox="0 0 859 117" width="859px" zoomAndPan="magnify">
<defs/>
<g>
<!--MD5=[8369d970a6ce36dade6897222e2ae942]
class Lambdas-->
<g id="elem_Lambdas">
<rect codeLine="1" fill="#F1F1F1" height="96.8906" id="Lambdas" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="838" x="7" y="7"/>
<ellipse cx="390.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/>
<path d="M393.7188,28.6406 Q393.1406,28.9375 392.5,29.0781 Q391.8594,29.2344 391.1563,29.2344 Q388.6563,29.2344 387.3281,27.5938 Q386.0156,25.9375 386.0156,22.8125 Q386.0156,19.6875 387.3281,18.0313 Q388.6563,16.375 391.1563,16.375 Q391.8594,16.375 392.5,16.5313 Q393.1563,16.6875 393.7188,16.9844 L393.7188,19.7031 Q393.0938,19.125 392.5,18.8594 Q391.9063,18.5781 391.2813,18.5781 Q389.9375,18.5781 389.25,19.6563 Q388.5625,20.7188 388.5625,22.8125 Q388.5625,24.9063 389.25,25.9844 Q389.9375,27.0469 391.2813,27.0469 Q391.9063,27.0469 392.5,26.7813 Q393.0938,26.5 393.7188,25.9219 L393.7188,28.6406 Z " fill="#000000"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="411.25" y="27.8467">Lambdas</text>
<line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="844" y1="39" y2="39"/>
<ellipse cx="18" cy="52.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="608" x="27" y="55.9951">loadFromStream : BiConsumer&lt;Stream&lt;String&gt;, Map&lt;String, Map&lt;String, Double&gt;&gt;&gt;</text>
<ellipse cx="18" cy="68.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="678" x="27" y="72.292">getMinForTime : BiFunction&lt;Map&lt;String, Map&lt;String, Double&gt;&gt;, String, Entry&lt;String, Double&gt;&gt;</text>
<ellipse cx="18" cy="85.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="812" x="27" y="88.5889">getValuesForCountry : BiFunction&lt;Map&lt;String, Map&lt;String, Double&gt;&gt;, String, Collection&lt;Entry&lt;String, Double&gt;&gt;&gt;</text>
<line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="844" y1="95.8906" y2="95.8906"/>
</g>
<!--MD5=[5e79eca3c3d6b0ebdc2b48ae6eccd36e]
@startuml
class "Lambdas" {
{static}  +  loadFromStream : BiConsumer<Stream<String>, Map<String, Map<String, Double>>>
{static}  +  getMinForTime : BiFunction<Map<String, Map<String, Double>>, String, Entry<String, Double>>
{static}  +  getValuesForCountry : BiFunction<Map<String, Map<String, Double>>, String, Collection<Entry<String, Double>>>
}

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
-->
</g>
</svg>
<p>Access modifiers in class diagrams:</p>
<p><img src="res/vidljivost.png" alt="Legenda vidljivosti" /></p>
<p>Example TSV file containing the data to be loaded:</p>
<pre class="line-numbers"><code class="language-tsv">Austria	Q2-2018	28.419
Austria	Q4-2018	28.53
Austria	Q2-2019	28.443
Belgium	Q2-2018	38.781
Belgium	Q4-2018	39.406
Belgium	Q2-2019	39.753
</code></pre>
<p>Each row of this TSV file contains the following three values:</p>
<ul>
<li><code>Country</code> - the name of the country to which the value refers,</li>
<li><code>Time</code> - timestamp (quarter-year) to which the value refers, and</li>
<li><code>Value</code> - the value representing the percentage of broadband internet subscribers in that country at the time of that timestamp.</li>
</ul>
<p><strong>Notes:</strong> In a TSV file, there may be data for countries and timestamps that are not shown in the example TSV file, but there cannot be missing values such that data for a country is missing for a certain timestamp.</p>
<p>The data from this TSV file is loaded using the <code>accept</code> method of the static attribute <code>loadFromStream</code>, which is of type <code>BiConsumer</code>. This method takes two arguments. The <code>lines</code> argument of type <code>Stream&lt;String&gt;</code> represents the collection stream of lines from this TSV file. The <code>map</code> argument of type <code>Map&lt;String, Map&lt;String, Double&gt;&gt;</code> represents the map in which the data needs to be loaded from the file. The keys in this map are of type <code>String</code> and represent the timestamps. The values are maps of type <code>Map&lt;String, Double&gt;</code>  with the key of type <code>String</code> representing the country name and the value of type <code>Double</code> representing the percentage of broadband internet subscribers in that country at the time of that timestamp. Implement the static attribute <code>loadFromStream</code> as a lambda expression using the Java Stream API (i.e., collection streams) and the default <code>compute</code> method from the <code>java.util.Map</code> interface.</p>
<p>The <code>apply</code> method of the static attribute <code>getMinForYear</code>, which is of type <code>BiFunction</code>, takes two arguments. The <code>map</code> argument of type <code>Map&lt;String, Map&lt;String, Double&gt;&gt;</code> is the map containing the data loaded by the <code>accept</code> method of the static attribute <code>loadFromStream</code>. The <code>time</code> argument of type <code>String</code> represents the timestamp for which you need to find the minimum percentage of broadband internet subscribers and the country in which it occurred. The result (country and minimal percentage of broadband internet subscribers) should be returned as an object of type <code>Entry&lt;String, Double&gt;</code> with the key of type <code>String</code> representing the country name and the value of type <code>Double</code> representing the percentage of broadband internet subscribers. <code>Entry</code> is an interface, so you can create objects of this type using the constructor of the <code>java.util.AbstractMap.SimpleEntry</code> class, which implements this interface. During implementation, you can use the terminal operation <code>Optional&lt;T&gt; findFirst()</code>, which retrieves the first element of the collection stream.</p>
<p>The <code>apply</code> method of the static attribute <code>getValuesForCountry</code>, which is of type <code>BiFunction</code>, takes two arguments. The <code>map</code> argument of type <code>Map&lt;String, Map&lt;String, Double&gt;&gt;</code> is the map containing the data loaded by the <code>accept</code> method of the static attribute <code>loadFromStream</code>. The <code>country</code> argument of type <code>String</code> represents the country for which you need to find the percentage of broadband internet subscribers for each timestamp for which there is data. The result is a collection of objects of type <code>Entry&lt;String, Double&gt;</code> with the key of type <code>String</code> representing the timestamp and the value of type <code>Double</code> representing the percentage of broadband internet subscribers.</p>
<p>Example usage of the <code>Lambdas</code> class and the static attributes that need to be implemented:</p>
<pre class="line-numbers"><code class="language-java">Map&lt;String, Map&lt;String, Double&gt;&gt; map = new TreeMap&lt;&gt;();
        
//just to correctly find the project dir
String startDir = System.getProperty(&quot;project.dir&quot;);
if (startDir == null) {
    startDir = System.getProperty(&quot;user.dir&quot;);
}

try {
    Path path = Path.of(startDir, &quot;src&quot;, &quot;main&quot;, &quot;resources&quot;, &quot;BSUBS_small.tsv&quot;);
    Lambdas.loadFromStream.accept(Files.lines(path), map);
    System.out.println(&quot;Loaded map: &quot; + map);
    System.out.println(&quot;Min for Q4-2018: &quot; + Lambdas.getMinForTime.apply(map, &quot;Q4-2018&quot;));
    System.out.println(&quot;Values for Belgium: &quot; + Lambdas.getValuesForCountry.apply(map, &quot;Belgium&quot;));
} catch (IOException ex) {
    System.out.println(&quot;The path does not exist: &quot; + ex);
}
</code></pre>
<p>Expected output:</p>
<pre class="line-numbers"><code class="language-txt">Loaded map: {Q2-2018={Austria=28.419, Belgium=38.781}, Q2-2019={Austria=28.443, Belgium=39.753}, Q4-2018={Austria=28.53, Belgium=39.406}}
Min for Q4-2018: Austria=28.53
Values for Belgium: [Q2-2018=38.781, Q2-2019=39.753, Q4-2018=39.406]
</code></pre>
  <script src="res/prism.js"></script>
</body>
</html>

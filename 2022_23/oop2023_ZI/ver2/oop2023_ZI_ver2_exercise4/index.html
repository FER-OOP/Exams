 <!DOCTYPE html>
 <html>
 <head>
   <meta charset="UTF-8">
  <link href="res/prism.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 16px;
    }
    code {
      font-size: 16px;
      font-family: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
    }
  </style>
</head>
<body>
<p>U zadatku je potrebno nadopuniti klasu <code>Lambdas</code> na način da se dovrši implementacija 3 statička atributa prikazana na dijagramu klasa. Statički atribut <code>loadFromStream</code> je tipa <code>BiConsumer</code>, a njegova metoda <code>accept</code> služi učitavanju podataka iz TSV (engl. tab separated values) datoteke u mapu. Preostala dva statička atributa su tipa <code>BiFunction</code>, a njihove metode <code>apply</code> koriste mapu u koju su učitani podaci za izračunavanje statistike.</p>
<p><strong>Napomene:</strong> Svaki od ova 3 statička atributa treba implementirati kao <strong>lambda izraz</strong> koristeći Java Stream API (tj. kolekcijske tokove). Pri implementaciji nije potrebno hvatati niti obrađivati iznimke. Klasa <code>Lambdas</code> se treba nalaziti u paketu <code>hr.fer.oop.stats</code>, a ona i njeni statički atributi trebaju imati vidljivost postavljenu na <em>public</em>.</p>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="117px" preserveAspectRatio="none" style="width:859px;height:117px;background:#FFFFFF;" version="1.1" viewBox="0 0 859 117" width="859px" zoomAndPan="magnify">
<defs/>
<g>
<!--MD5=[8369d970a6ce36dade6897222e2ae942]
class Lambdas-->
<g id="elem_Lambdas">
<rect codeLine="1" fill="#F1F1F1" height="96.8906" id="Lambdas" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="838" x="7" y="7"/>
<ellipse cx="390.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/>
<path d="M393.7188,28.6406 Q393.1406,28.9375 392.5,29.0781 Q391.8594,29.2344 391.1563,29.2344 Q388.6563,29.2344 387.3281,27.5938 Q386.0156,25.9375 386.0156,22.8125 Q386.0156,19.6875 387.3281,18.0313 Q388.6563,16.375 391.1563,16.375 Q391.8594,16.375 392.5,16.5313 Q393.1563,16.6875 393.7188,16.9844 L393.7188,19.7031 Q393.0938,19.125 392.5,18.8594 Q391.9063,18.5781 391.2813,18.5781 Q389.9375,18.5781 389.25,19.6563 Q388.5625,20.7188 388.5625,22.8125 Q388.5625,24.9063 389.25,25.9844 Q389.9375,27.0469 391.2813,27.0469 Q391.9063,27.0469 392.5,26.7813 Q393.0938,26.5 393.7188,25.9219 L393.7188,28.6406 Z " fill="#000000"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="411.25" y="27.8467">Lambdas</text>
<line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="844" y1="39" y2="39"/>
<ellipse cx="18" cy="52.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="608" x="27" y="55.9951">loadFromStream : BiConsumer&lt;Stream&lt;String&gt;, Map&lt;String, Map&lt;String, Double&gt;&gt;&gt;</text>
<ellipse cx="18" cy="68.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="678" x="27" y="72.292">getMinForTime : BiFunction&lt;Map&lt;String, Map&lt;String, Double&gt;&gt;, String, Entry&lt;String, Double&gt;&gt;</text>
<ellipse cx="18" cy="85.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/>
<text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="812" x="27" y="88.5889">getValuesForCountry : BiFunction&lt;Map&lt;String, Map&lt;String, Double&gt;&gt;, String, Collection&lt;Entry&lt;String, Double&gt;&gt;&gt;</text>
<line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="844" y1="95.8906" y2="95.8906"/>
</g>
<!--MD5=[5e79eca3c3d6b0ebdc2b48ae6eccd36e]
@startuml
class "Lambdas" {
{static}  +  loadFromStream : BiConsumer<Stream<String>, Map<String, Map<String, Double>>>
{static}  +  getMinForTime : BiFunction<Map<String, Map<String, Double>>, String, Entry<String, Double>>
{static}  +  getValuesForCountry : BiFunction<Map<String, Map<String, Double>>, String, Collection<Entry<String, Double>>>
}

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
-->
</g>
</svg>
<p>Legenda vidljivosti u dijagramu klasa:</p>
<p><img src="res/vidljivost.png" alt="Legenda vidljivosti" /></p>
<p>Primjer TSV datoteke u kojoj se nalaze podaci koje treba učitati je sljedeći:</p>
<pre class="line-numbers"><code class="language-tsv">Austria	Q2-2018	28.419
Austria	Q4-2018	28.53
Austria	Q2-2019	28.443
Belgium	Q2-2018	38.781
Belgium	Q4-2018	39.406
Belgium	Q2-2019	39.753
</code></pre>
<p>Svaki redak ove TSV datoteke sadrži sljedeće tri vrijednosti:</p>
<ul>
<li><code>Country</code> – ime države na koju se odnosi vrijednost,</li>
<li><code>Time</code> – vremenska oznaka (kvartal-godina) na koju se odnosi vrijednost i</li>
<li><code>Value</code> – vrijednost koja predstavlja postotak pretplatnika širokopojasnog interneta u toj državi u trenutku te vremenske oznake.</li>
</ul>
<p><strong>Napomene:</strong> U TSV datoteci se mogu nalaziti podaci za države i vremenske oznake koja nisu prikazana u primjeru TSV datoteke, ali se ne mogu nalaziti nedostajuće vrijednosti na način da za neku vremensku oznaku nedostaju podaci za neku državu.</p>
<p>Podaci iz ove TSV datoteke se učitavaju metodom <code>accept</code> statičkog atributa <code>loadFromStream</code> koji je tipa <code>BiConsumer</code>. Ova metoda prima 2 argumenta. Argument <code>lines</code> tipa <code>Stream&lt;String&gt;</code> predstavlja kolekcijski tok linija ove TSV datoteke. Argument <code>map</code> tipa <code>Map&lt;String, Map&lt;String, Double&gt;&gt;</code> predstavlja mapu u koje je potrebno učitati podatke iz datoteke. Ključevi u ovoj mapi su tipa <code>String</code> i predstavljaju vremensku oznaku. Vrijednosti su mape tipa <code>Map&lt;String, Double&gt;</code> s ključem tipa <code>String</code> koji predstavlja ime države i vrijednošću tipa <code>Double</code> koja predstavlja postotak pretplatnika širokopojasnog interneta u toj državi u trenutku te vremenska oznake. Statički atribut <code>loadFromStream</code> implementirajte kao lambda izraz koristeći Java Stream API (tj. kolekcijske tokove) i podrazumijevanu (engl. default) metodu <code>compute</code> iz sučelja <code>java.​util.​Map</code>.</p>
<p>Metoda <code>apply</code> statičkog atributa <code>getMinForTime</code> koji je tipa <code>BiFunction</code> prima dva argumenta. Argument <code>map</code> tipa <code>Map&lt;String, Map&lt;String, Double&gt;&gt;</code> je mapa s podacima koje je učitana metodom <code>accept</code> statičkog atributa <code>loadFromStream</code>. Argument <code>time</code> tipa <code>String</code> predstavlja vremensku oznaku za koju je potrebno pronaći minimalan postotak pretplatnika širokopojasnog interneta i državu u kojoj je to bilo. Rezultat (državu i minimalan postotak pretplatnika širokopojasnog interneta) treba vratiti kao objekt tipa <code>Entry&lt;String, Double&gt;</code> s ključem tipa <code>String</code> koji predstavlja ime države i vrijednošću tipa <code>Double</code> koja predstavlja postotak pretplatnika širokopojasnog interneta. <code>Entry</code> je sučelje pa objekte ovog tipa stvorite korištenjem konstruktora klase <code>java.util.AbstractMap.SimpleEntry</code> koja implementira ovo sučelje. Pri implementaciji možete koristiti terminalnu operaciju <code>Optional&lt;T&gt; findFirst()</code> koja dohvaća prvi element kolekcijskog toka.</p>
<p>Metoda <code>apply</code> statičkog atributa <code>getValuesForCountry</code> koji je tipa <code>BiFunction</code> prima dva argumenta. Argument <code>map</code> tipa <code>Map&lt;String, Map&lt;String, Double&gt;&gt;</code> je mapa s podacima koje je učitana metodom <code>accept</code> statičkog atributa <code>loadFromStream</code>. Argument <code>country</code> tipa <code>String</code> predstavlja ime države za koju je potrebno pronaći postotak pretplatnika širokopojasnog interneta za svaku vremensku oznaku za koju postoje podaci. Rezultat je kolekcija objekata tipa <code>Entry&lt;String, Double&gt;</code> s ključem tipa <code>String</code> koji predstavlja vremensku oznaku i vrijednošću tipa <code>Double</code> koja predstavlja postotak pretplatnika širokopojasnog interneta.</p>
<p>Primjer korištenja klase <code>Lambdas</code> i statičkih atributa koje treba implementirati:</p>
<pre class="line-numbers"><code class="language-java">Map&lt;String, Map&lt;String, Double&gt;&gt; map = new TreeMap&lt;&gt;();
        
//just to correctly find the project dir
String startDir = System.getProperty(&quot;project.dir&quot;);
if (startDir == null) {
    startDir = System.getProperty(&quot;user.dir&quot;);
}

try {
    Path path = Path.of(startDir, &quot;src&quot;, &quot;main&quot;, &quot;resources&quot;, &quot;BSUBS_small.tsv&quot;);
    Lambdas.loadFromStream.accept(Files.lines(path), map);
    System.out.println(&quot;Loaded map: &quot; + map);
    System.out.println(&quot;Min for Q4-2018: &quot; + Lambdas.getMinForTime.apply(map, &quot;Q4-2018&quot;));
    System.out.println(&quot;Values for Belgium: &quot; + Lambdas.getValuesForCountry.apply(map, &quot;Belgium&quot;));
} catch (IOException ex) {
    System.out.println(&quot;The path does not exist: &quot; + ex);
}
</code></pre>
<p>Očekivani ispis:</p>
<pre class="line-numbers"><code class="language-txt">Loaded map: {Q2-2018={Austria=28.419, Belgium=38.781}, Q2-2019={Austria=28.443, Belgium=39.753}, Q4-2018={Austria=28.53, Belgium=39.406}}
Min for Q4-2018: Austria=28.53
Values for Belgium: [Q2-2018=38.781, Q2-2019=39.753, Q4-2018=39.406]
</code></pre>
  <script src="res/prism.js"></script>
</body>
</html>
